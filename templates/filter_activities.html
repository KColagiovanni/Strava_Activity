{% extends 'base.html' %}

{% block head %}
<title>Activities</title>
{% endblock %}

{% block body %}
<h3>Filter</h3>
    <div class="dropdown">
        <form method="POST">

            <!-- Activity Name Text Search -->
            <label for="activity_name_search"
                   class="ms-2 mt-2">Search Activity Name
            </label>
            <input type="text"
                   name="activity_search"
                   class="form-control ms-2 mb-2"
                   style="width:450px"
                   placeholder="Search Activity Name"
                   id="activity_name_search">

            <!-- Dropdown box to select Activity Type to display -->
            <label for="dropdown-menu"
                   class="ms-2 mt-2">Activity Type
            </label>
            <select name="options"
                    id="dropdown-menu"
                    class="form-select ms-2 mb-2"
                    style="width:250px"
                    onchange="getDropdownValue()">

                <!-- Add the "All" option to the dropdown box to represent all activities-->
                <option value="All">All</option>

                <!-- Populate the Activity Type dropdown box with the actual activity types included in the database -->
                {% for type in activity_type_list %}
                    <option value="{{ type }}">{{ type }}</option>
                {% endfor %}
            </select>

            <!-- Date picker to select activities after selected date -->
            <label class="ms-2 my-2" for="datetime_local_start"> Start Date
                <input name="start_date"
                       class="my-2"
                       type="date"
                       id="datetime_local_start"/>
            </label>

            <!-- Date picker to select activities after selected date -->
            <label class="my-2" for="datetime_local_end"> End Date
                <input name="end_date"
                       class="my-2"
                       type="date"
                       id="datetime_local_end"/>
            </label>

            <!-- Checkbox to filter activities that are commutes -->
            <div class="form-check ms-2 my-2">
                <input name="commute"
                       class="form-check-input"
                       type="checkbox"
                       value="commute"
                       id="commute_checkbox">
                <label class="form-check-label" for="commute_checkbox">Commute</label>
            </div>

            <!-- Number boxes to filter activity distance by min and max -->
            <div class="ms-2 mt-2">
                <p>Distance: </p>

                <label  class="ms-2 my-2" for="more_than_distance_filter">More than</label>
                <input  class="my-2 number_input"
                        type="number"
                        id="more_than_distance_filter"
                        name="more_than_distance"
                        value="{{ min_activities_distance }}"
                        min="{{ min_activities_distance }}"
                        max="{{ max_activities_distance }}"
                        step="0.01"/>

                <label  class="ms-2 my-2" for="less_than_distance_filter">Less than</label>
                <input  class="my-2 number_input"
                        type="number"
                        id="less_than_distance_filter"
                        name="less_than_distance"
                        value="{{ max_activities_distance }}"
                        min="{{ min_activities_distance }}"
                        max="{{ max_activities_distance }}"
                        step="0.01"/>
            </div>

            <!-- Number boxes to filter activity elevation gain by min and max -->
            <div class="ms-2 my-2">
                <p>Elevation Gain: </p>

                <label  class="ms-2 my-2" for="more_than_elevation_gain_filter">More than</label>
                <input  class="my-2 number_input"
                        type="number"
                        id="more_than_elevation_gain_filter"
                        name="more_than_elevation_gain"
                        value="{{ min_activities_elevation_gain }}"
                        min="{{ min_activities_elevation_gain }}"
                        max="{{ max_activities_elevation_gain }}"
                        step="0.01"/>

                <label  class="ms-2 my-2" for="less_than_elevation_gain_filter">Less than</label>
                <input  class="my-2 number_input"
                        type="number"
                        id="less_than_elevation_gain_filter"
                        name="less_than_elevation_gain"
                        value="{{ max_activities_elevation_gain }}"
                        min="{{ min_activities_elevation_gain }}"
                        max="{{ max_activities_elevation_gain }}"
                        step="0.01"/>

            </div>

            <!-- Number boxes to filter activity elevation gain by min and max -->
            <div class="ms-2 my-2">
                <p>Highest Elevation: </p>

                <label  class="ms-2 my-2" for="more_than_highest_elevation_filter">More than</label>
                <input  class="my-2 number_input"
                        type="number"
                        id="more_than_highest_elevation_filter"
                        name="more_than_highest_elevation"
                        value="{{ min_activities_highest_elevation }}"
                        min="{{ min_activities_highest_elevation }}"
                        max="{{ max_activities_highest_elevation }}"
                        step="0.01"/>

                <label  class="ms-2 my-2" for="less_than_highest_elevation_filter">Less than</label>
                <input  class="my-2 number_input"
                        type="number"
                        id="less_than_highest_elevation_filter"
                        name="less_than_highest_elevation"
                        value="{{ max_activities_highest_elevation }}"
                        min="{{ min_activities_highest_elevation }}"
                        max="{{ max_activities_highest_elevation }}"
                        step="0.01"/>

            </div>

            <div>
                <p>Moving Time is Greater Than: </p>
                <label for="more_than_hours">Hours:</label>
                <input  class="my-2 number_input_time"
                        type="number"
                        id="more_than_hours"
                        name="more_than_hours"
                        value="{{ shortest_moving_time_split[0] }}"
                        min="{{ shortest_moving_time_split[0] }}"
                        max="{{ longest_moving_time_split[0] }}"
                        step="1"/>

                <label for="more_than_minutes">Minutes:</label>
                <input  class="my-2 number_input_time"
                        type="number"
                        id="more_than_minutes"
                        name="more_than_minutes"
                        value="{{ shortest_moving_time_split[1] }}"
                        min="00"
                        max="59"
                        step="1"/>

                <label for="more_than_seconds">Seconds:</label>
                <input  class="my-2 number_input_time"
                    type="number"
                    id="more_than_seconds"
                    name="more_than_seconds"
                    value="{{ shortest_moving_time_split[2] }}"
                    min="00"
                    max="59"
                    step="1"/>
          </div>

            <div>
                <p>Moving Time is Less Than: </p>
                <label for="less_than_hours">Hours:</label>
                <input  class="my-2 number_input_time"
                        type="number"
                        id="less_than_hours"
                        name="less_than_hours"
                        value="{{ longest_moving_time_split[0] }}"
                        min="{{ shortest_moving_time_split[0] }}"
                        max="{{ longest_moving_time_split[0] }}"
                        step="1"/>

                <label for="less_than_minutes">Minutes:</label>
                <input  class="my-2 number_input_time"
                        type="number"
                        id="less_than_minutes"
                        name="less_than_minutes"
                        value="{{ longest_moving_time_split[1] }}"
                        min="00"
                        max="59"
                        step="1"/>

                <label for="less_than_seconds">Seconds:</label>
                <input  class="my-2 number_input_time"
                        type="number"
                        id="less_than_seconds"
                        name="less_than_seconds"
                        value="{{ longest_moving_time_split[2] }}"
                        min="00"
                        max="59"
                        step="1"/>
            </div>

            <br>
            <!-- Submit the form -->
            <button type="submit"
                    class="ms-2 my-2">Filter
            </button>
        </form>

    <!--        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" onchange="getDropdownValue()">-->
    <!--            Filter by Activity-->
    <!--        </button>-->
    <!--        <ul class="dropdown-menu">-->
    <!--            {% for type in activity_type_list %}-->
    <!--                <li><a class="dropdown-item" value="{{ type }}">{{ type }}</a></li>-->
    <!--            {% endfor %}-->
    <!--        </ul>-->
<!--        <div id="activity-type" class="ms-2 mb-2">Showing All Activities</div>-->
    </div>
    <hr>
    <h2>Activities</h2>
    <div class="ms-2 my-2">{{ num_of_activities }}</div>
    <table>
        <tr>
            <th>Activity Name</th>
            <th>Start Time</th>
            <th>Moving Time</th>
            <th>Distance</th>
            <th>Average Speed</th>
            <th>Max Speed</th>
            <th>Elevation Gain</th>
            <th>Highest Elevation</th>
            <th>Activity Type</th>
        </tr>
        {% for activity in activities %}
        <tr>
            <td><a href="{{ url_for('activity_info', activity_id=activity.activity_id) }}">{{ activity.activity_name }}</a></td>
            <td>{{ activity.start_time }}</td>
            <td>{{ activity.moving_time }}</td>
            <td>{{ activity.distance }}</td>
            <td>{{ activity.average_speed }}</td>
            <td>{{ activity.max_speed }}</td>
            <td>{{ activity.elevation_gain }}</td>
            <td>{{ activity.highest_elevation }}</td>
            <td>{{ activity.activity_type }}</td>
        </tr>
        {% endfor %}
    </table>
{% endblock %}
